

; ============================================
; ENTORNO PARA NODEMCU ESP32-S v1.1 (CP2102)
; ============================================
[env:nodemcu-32s]
platform = espressif32
board = esp32dev ; ← CRÍTICO: Diferente board
framework = arduino
monitor_speed = 115200
upload_speed = 921600
lib_ldf_mode = chain

; Configuraciones ESPECÍFICAS para NodeMCU
board_build.flash_mode = dio
board_build.f_cpu = 240000000L
monitor_rts = 0
monitor_dtr = 0

; Librerías MÍNIMAS y compatibles
lib_deps =
  adafruit/DHT sensor library@^1.4.6
  adafruit/Adafruit Unified Sensor@^1.1.4
  bblanchon/ArduinoJson@^6.21.5
  chris--a/Keypad@^3.1.1
  marcoschwartz/LiquidCrystal_I2C@^1.1.4
  knolleary/PubSubClient@^2.8.0              ; ← SOLO esta librería MQTT
  links2004/WebSockets@^2.3.6                ; ← Mejor usar versión oficial

lib_ignore = 
  WiFiNINA
  WiFi101
  MKRGSM
  MKRNB
  RTCZero
  Arduino_SecureElement
  Arduino_KVStore
  ArduinoIoTCloud           ; ← ELIMINAR del NodeMCU
  Arduino_ConnectionHandler ; ← ELIMINAR
  ArduinoMqttClient         ; ← ELIMINAR
  ; https://github.com/Links2004/arduinoWebSockets.git#2.7.1  ; ← NO usar git directo
  ; https://github.com/arduino-libraries/ArduinoMqttClient.git  ; ← CONFLICTO